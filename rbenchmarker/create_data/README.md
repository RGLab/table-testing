# Generating test data(R version

The test data can be generated by building the docker image defined and running it:

```bash
docker build -t matrix_data_r .
#Print the helps for the supported arguments
docker run matrix_data_r -h
#convert the data format
docker run -v /path/to/input_file:/input_file -v /path/to/output:/output matrix_data_r \
                --src_path=/input_file --dest_path=/output \
                --from="h5" --to="bigmemory"
```

The image has an entrypoint that expects the following arguments(Note that no spaces are allowed at both sides of = when specifying the arguments):
- --src_path: The path, within the docker container, to the source formats
- --dest_path: The path, again within the docker container, where the output expression matrices should be written.
- --from: The source data format to be converted from, default is 'h5'
- --to: The destination data format to be converted to, default is 'bigmemory'
- --dataset_name: The name of the dataset that stores the expression matrix in the source data format(only applicable for h5)


The command above assumes the source data file exists at `/path/to/input_file`, and it will place the created matrices in subdirectories of `/path/to/output`.


# Adding new output formats

- There has to be a function called `{from}_to_{to}` in [converters.R](converters.R) that can convert the source data {from} into {to} file format.
- Add any dependencies to the [Dockerfile](create_data/Dockerfile]

